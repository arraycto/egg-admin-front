{"version":3,"file":"js/15.js","sources":["webpack:///./src/views/sys/menu/index.vue?c59b","webpack:///./src/views/sys/menu/index.vue?496c","webpack:///./src/views/sys/menu/index.vue","webpack:///./src/views/sys/menu/index.vue?f40e","webpack:///./src/views/sys/menu/index.vue?8e33","webpack:///./src/views/sys/menu/option.js"],"sourcesContent":["import \"core-js/modules/es.array.for-each\";\nimport \"core-js/modules/es.array.includes\";\nimport \"core-js/modules/es.string.includes\";\nimport \"core-js/modules/web.dom-collections.for-each\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/github/workspace/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/github/workspace/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport crudMixin from \"@/mixins/crud\";\nimport { tableOption } from \"./option\";\nimport { getTree, create, update, remove } from \"@/api/sys/menu\";\nimport { mapActions, mapState } from \"vuex\";\nexport default {\n  name: \"sys-menu\",\n  mixins: [crudMixin],\n  data: function data() {\n    return {\n      crudOption: {\n        getList: getTree,\n        create: create,\n        update: update,\n        remove: remove\n      },\n      tableOption: tableOption\n    };\n  },\n  watch: {\n    formData: {\n      handler: function handler(val) {\n        var component = val.component,\n            type = val.type;\n        tableOption.column.forEach(function (item) {\n          switch (item.prop) {\n            case \"query\":\n              item.display = component && component.includes(\"/\");\n              break;\n\n            case \"url\":\n            case \"blank\":\n              item.display = component === \"Iframe\";\n              break;\n\n            case \"icon\":\n            case \"path\":\n            case \"component\":\n            case \"name\":\n            case \"cache\":\n              item.display = type === \"0\";\n              break;\n\n            default:\n              break;\n          }\n        });\n      },\n      deep: true,\n      immediate: true\n    }\n  },\n  computed: _objectSpread(_objectSpread({}, mapState(\"d2admin/menu\", [\"perm\"])), {}, {\n    permission: function permission() {\n      return {\n        addBtn: !!this.perm.sys_menu_save,\n        editBtn: !!this.perm.sys_menu_update,\n        delBtn: !!this.perm.sys_menu_delete,\n        addSubBtn: !!this.perm.sys_menu_save\n      };\n    },\n    menuTree: function menuTree() {\n      return [{\n        title: \"一级菜单\",\n        _id: \"0\",\n        children: this.tableData\n      }];\n    }\n  }),\n  methods: _objectSpread(_objectSpread({}, mapActions(\"d2admin/menu\", [\"getMenu\"])), {}, {\n    addMenu: function addMenu(row) {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.$refs.crud.rowAdd();\n\n                _context.next = 3;\n                return _this.$nextTick();\n\n              case 3:\n                _this.formData.parentId = row._id;\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    afterUpdate: function afterUpdate() {\n      var _this2 = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this2.getMenu(true);\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))();\n    }\n  })\n};","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"d2-container\",\n    [\n      _c(\"avue-crud\", {\n        ref: \"crud\",\n        attrs: {\n          page: _vm.page,\n          \"table-loading\": _vm.tableLoading,\n          option: _vm.tableOption,\n          data: _vm.tableData\n        },\n        on: {\n          \"current-change\": _vm.pageCurrentChange,\n          \"size-change\": _vm.pageSizeChange,\n          \"search-change\": _vm.searchChange,\n          \"search-reset\": _vm.searchReset,\n          \"refresh-change\": _vm.getDataList,\n          \"selection-change\": _vm.selectionChange,\n          \"sort-change\": _vm.sortChange,\n          \"row-save\": _vm.handleSave,\n          \"row-update\": _vm.handleUpdate,\n          \"row-del\": _vm.rowDel\n        },\n        scopedSlots: _vm._u([\n          {\n            key: \"parentIdForm\",\n            fn: function(ref) {\n              var row = ref.row\n              return [\n                _c(\"avue-input-tree\", {\n                  attrs: {\n                    placeholder: \"请选择上级菜单\",\n                    dic: _vm.menuTree,\n                    props: { label: \"title\", value: \"_id\" }\n                  },\n                  model: {\n                    value: row.parentId,\n                    callback: function($$v) {\n                      _vm.$set(row, \"parentId\", $$v)\n                    },\n                    expression: \"row.parentId\"\n                  }\n                })\n              ]\n            }\n          },\n          {\n            key: \"icon\",\n            fn: function(ref) {\n              var row = ref.row\n              return [_c(\"d2-icon\", { attrs: { name: row.icon } })]\n            }\n          },\n          {\n            key: \"iconForm\",\n            fn: function(ref) {\n              var row = ref.row\n              return [\n                _c(\"d2-icon-select\", {\n                  model: {\n                    value: row.icon,\n                    callback: function($$v) {\n                      _vm.$set(row, \"icon\", $$v)\n                    },\n                    expression: \"row.icon\"\n                  }\n                })\n              ]\n            }\n          },\n          {\n            key: \"menu\",\n            fn: function(ref) {\n              var row = ref.row\n              return [\n                _vm.permission.addSubBtn\n                  ? _c(\n                      \"el-button\",\n                      {\n                        attrs: {\n                          type: \"text\",\n                          size: \"small\",\n                          icon: \"el-icon-plus\"\n                        },\n                        on: {\n                          click: function($event) {\n                            return _vm.addMenu(row)\n                          }\n                        }\n                      },\n                      [_vm._v(\"新增下级\")]\n                    )\n                  : _vm._e()\n              ]\n            }\n          },\n          {\n            key: \"componentForm\",\n            fn: function(ref) {\n              var row = ref.row\n              return [\n                _c(\n                  \"el-select\",\n                  {\n                    attrs: {\n                      filterable: \"\",\n                      \"allow-create\": \"\",\n                      \"default-first-option\": \"\",\n                      placeholder: \"请选择或输入前端组件\"\n                    },\n                    model: {\n                      value: row.component,\n                      callback: function($$v) {\n                        _vm.$set(row, \"component\", $$v)\n                      },\n                      expression: \"row.component\"\n                    }\n                  },\n                  [\n                    _c(\"el-option\", {\n                      attrs: { label: \"Main\", value: \"Main\" }\n                    }),\n                    _c(\"el-option\", {\n                      attrs: { label: \"Iframe\", value: \"Iframe\" }\n                    })\n                  ],\n                  1\n                )\n              ]\n            }\n          }\n        ]),\n        model: {\n          value: _vm.formData,\n          callback: function($$v) {\n            _vm.formData = $$v\n          },\n          expression: \"formData\"\n        }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0a34233e&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/github/workspace/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0a34233e')) {\n      api.createRecord('0a34233e', component.options)\n    } else {\n      api.reload('0a34233e', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=0a34233e&\", function () {\n      api.rerender('0a34233e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/views/sys/menu/index.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/.cache/vue-loader\\\",\\\"cacheIdentifier\\\":\\\"4f7348be-vue-loader-template\\\"}!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=template&id=0a34233e&\"","export var tableOption = {\n  rowKey: \"_id\",\n  align: \"center\",\n  index: true,\n  column: [{\n    label: \"上级菜单\",\n    prop: \"parentId\",\n    value: \"0\",\n    hide: true,\n    formslot: true,\n    span: 24,\n    rules: [{\n      required: true,\n      message: \"请选择上级菜单\",\n      trigger: \"change\"\n    }]\n  }, {\n    label: \"菜单名称\",\n    prop: \"title\",\n    span: 24,\n    rules: [{\n      required: true,\n      message: \"请输入菜单名称\",\n      trigger: \"change\"\n    }]\n  }, {\n    label: \"类型\",\n    prop: \"type\",\n    type: \"select\",\n    dicData: [{\n      label: \"菜单\",\n      value: \"0\"\n    }, {\n      label: \"按钮\",\n      value: \"1\"\n    }],\n    span: 24,\n    value: \"0\",\n    rules: [{\n      required: true,\n      message: \"请选择类型\",\n      trigger: \"change\"\n    }]\n  }, {\n    label: \"图标\",\n    prop: \"icon\",\n    slot: true,\n    formslot: true,\n    display: true,\n    span: 24\n  }, {\n    label: \"路由路径\",\n    prop: \"path\",\n    span: 24\n  }, {\n    label: \"前端组件\",\n    prop: \"component\",\n    formslot: true,\n    span: 24\n  }, {\n    label: \"携带参数\",\n    prop: \"query\",\n    display: false,\n    hide: true,\n    span: 24\n  }, {\n    label: \"组件名\",\n    prop: \"name\",\n    span: 24\n  }, {\n    label: \"Iframe地址\",\n    prop: \"url\",\n    display: false,\n    hide: true,\n    span: 18\n  }, {\n    label: \"新窗口打开\",\n    prop: \"blank\",\n    type: \"switch\",\n    value: false,\n    display: false,\n    hide: true,\n    span: 6\n  }, {\n    label: \"排序\",\n    prop: \"sort\",\n    type: \"number\",\n    span: 24,\n    value: 0\n  }, {\n    label: \"权限\",\n    prop: \"permissions\",\n    span: 24\n  }, {\n    label: \"路由缓存\",\n    prop: \"cache\",\n    type: \"switch\",\n    span: 24,\n    value: true\n  }]\n};"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClLA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtJA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAiBA;AACA;AACA;;;;;;;;;;;;ACtCA;AAAA;AAAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}